(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{247:function(t,e,n){var content=n(268);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(68).default)("6aee85be",content,!0,{sourceMap:!1})},267:function(t,e,n){"use strict";n(247)},268:function(t,e,n){var r=n(67)((function(i){return i[1]}));r.push([t.i,".centerDiv[data-v-e14816da]{\n  transform:translate(-50%,-50%)\n}",""]),t.exports=r},312:function(t,e,n){"use strict";n.r(e);n(116),n(41),n(33);var r=n(56),o=n.n(r),d={data:function(){return{username:"",token:"",suggested:[],first_name:"",last_name:"",birthday:"",gender:""}},beforeMount:function(){""!==this.$route.hash&&this.alreadyRegister()},methods:{getId:function(t){var e=this;o()({url:"https://storylation.eu.ngrok.io/api/me",method:"get",headers:{authorization:"Bearer ".concat(t)}}).then((function(t){e.$auth.$storage.setUniversal("selectedId",t.data.data.id),e.$router.push({path:t.data.data.id,params:{id:t.data.data.id}})})).catch((function(t){throw t}))},alreadyRegister:function(){var t=this,e=this.$route.hash.split("=")[1].split("&")[0];this.token=e,o()({url:"https://storylation.eu.ngrok.io/api/login/facebook",method:"post",data:{fb_token:this.token}}).then((function(n){t.$auth.$storage.setUniversal("facebookToken",e),t.$auth.$storage.setUniversal("userToken",n.data.access_token),t.getId(n.data.access_token)})).catch((function(e){throw t.getFBInfo(),e}))},getFBInfo:function(){var t=this;o()({url:"https://graph.facebook.com/me?fields=gender,birthday,email,first_name,last_name",method:"get",headers:{authorization:"Bearer ".concat(this.token)}}).then((function(e){t.first_name=e.data.first_name,t.last_name=e.data.last_name;var n=e.data.birthday.split("/"),r=n[2]+"-"+n[0]+"-"+n[1];t.birthday=r,t.gender=e.data.gender})).catch((function(t){throw t}))},showSuggest:function(){var t=this;o()({url:"https://storylation.eu.ngrok.io/api/usernames/suggest",method:"post",data:{first_name:this.first_name,last_name:this.last_name,birthday:this.birthday}}).then((function(e){for(var i=0;i<Object.keys(e.data.data).length;i++)t.suggested.push(e.data.data[i])})).catch((function(t){throw t}))},checkAvailability:function(){var t=this;o()({url:"https://storylation.eu.ngrok.io/api/usernames/check-availability",method:"post",data:{username:this.username}}).then((function(e){t.completeRegister()})).catch((function(e){throw Object.keys(t.suggested).length<10&&t.showSuggest(),e}))},completeRegister:function(){var t=this;o()({url:"https://storylation.eu.ngrok.io/api/registration/facebook-register",method:"post",data:{fb_token:this.token,first_name:this.first_name,last_name:this.last_name,birthday:this.birthday,gender:this.gender,username:this.username,locale:navigator.language}}).then((function(e){t.$auth.$storage.setUniversal("selectedId",e.data.data.id),t.$auth.$storage.setUniversal("userToken",t.token),t.$router.push({path:t.username,params:{id:e.data.data.id}})})).catch((function(t){throw t}))}}},c=(n(267),n(46)),component=Object(c.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"absolute top-1/2 left-1/2 centerDiv w-123"},[t._m(0),t._v(" "),n("div",{staticClass:"mt-10 shadow-2xl sm:mt-0",attrs:{id:"personalContainer"}},[n("div",{staticClass:"md:grid md:grid-cols-3 md:gap-6"},[t._m(1),t._v(" "),n("div",{staticClass:"mt-5 md:mt-0 md:col-span-2"},[n("div",{staticClass:"shadow overflow-hidden sm:rounded-md"},[n("div",{staticClass:"px-4 py-5 bg-white sm:p-6"},[n("div",{staticClass:"grid grid-cols-6 gap-6"},[n("div",{staticClass:"col-span-6 sm:col-span-3"},[n("label",{staticClass:"block text-sm font-medium text-gray-700",attrs:{for:"first_name"}},[t._v("\n                  Username\n                ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",attrs:{type:"text",name:"first_name",id:"first_name",autocomplete:"given-name"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"flex-row flex flex-wrap"},t._l(t.suggested,(function(e){return n("p",{key:e,staticClass:"mt-2 ml-2"},[t._v("\n                  "+t._s(e)+"\n                ")])})),0)])]),t._v(" "),n("div",{staticClass:"px-4 py-3 bg-gray-50 text-right sm:px-6"},[n("button",{staticClass:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-storyColor hover:bg-storyColor focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",on:{click:function(e){return t.checkAvailability()}}},[t._v("\n              Continue\n            ")])])])])])]),t._v(" "),t._m(2)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hidden sm:block",attrs:{"aria-hidden":"true"}},[e("div",{staticClass:"py-5"},[e("div",{staticClass:"border-t border-gray-200"})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"md:col-span-1"},[n("div",{staticClass:"px-4 sm:px-0"},[n("h3",{staticClass:"text-lg font-medium leading-6 text-gray-900"},[t._v("\n            Choose your username\n          ")]),t._v(" "),n("p",{staticClass:"mt-1 text-sm text-gray-600"},[t._v("Enter your username here.")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hidden sm:block",attrs:{"aria-hidden":"true"}},[e("div",{staticClass:"py-5"},[e("div",{staticClass:"border-t border-gray-200"})])])}],!1,null,"e14816da",null);e.default=component.exports}}]);