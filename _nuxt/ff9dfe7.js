(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{237:function(t,e){t.exports="object"==typeof self?self.FormData:window.FormData},256:function(t,e,n){var content=n(289);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(68).default)("37e351f8",content,!0,{sourceMap:!1})},288:function(t,e,n){"use strict";n(256)},289:function(t,e,n){var o=n(67)((function(i){return i[1]}));o.push([t.i,'.Rectangle[data-v-810d5ffc]{\n  height:39px;\n  padding:6px 6px 5px 12px;\n  border-radius:11px;\n  background-color:#ffe6e3\n}\n.phrase[data-v-810d5ffc]{\n  color:#ee8172;\n  height:15px;\n  margin:1px 5px 2px 0;\n  font-size:16px;\n  font-weight:700\n}\n.Rectangle-Copy-4[data-v-810d5ffc]{\n  height:39px;\n  margin:12px 10px 1px 16px;\n  padding:7px 6px 6px 12px;\n  border-radius:11px;\n  background-color:#f3f4f7\n}\n.phrase-copy-4[data-v-810d5ffc]{\n  margin:1px 5px 2px 0;\n  font-size:16px;\n  font-weight:700;\n  font-stretch:normal;\n  font-style:normal;\n  line-height:normal;\n  letter-spacing:normal;\n  color:#132963\n}\n.text-IBM[data-v-810d5ffc]{\n  font-family:"IBMPlexSans",sans-serif\n}\n.button_out[data-v-810d5ffc]{\n  outline:none\n}\ntemplate[data-v-810d5ffc]{\n  max-height:100vh;\n  max-width:100vw\n}\n[data-v-810d5ffc]::-webkit-scrollbar{\n  display:none\n}',""]),t.exports=o},321:function(t,e,n){"use strict";n.r(e);n(174),n(33),n(57);var o=n(56),r=n.n(o),c=n(237),l=n.n(c),d={data:function(){return{searchContent:"",searchContentTag:"",userResult:[],tagResult:[],types:[],id:"",story:{receiver:"",name_receiver:"",type:"",content:"",pictures:[],tags:[],groups:"",kudoboard:!1},groups:[],selectedGroup:[],selectedTags:[],numberChecked:0,rowChecked:-1}},beforeMount:function(){this.story.type="Story about",this.types=["Story about","Introducing","Many thanks to","Good memory with","Inspired by","Congratulations to","Fun fact about","Proud of","Respect to","Shoutout to","How I met","Impressed by","My first impression of","Conversation opener for","What I like about","Happy for"],null===this.$auth.$storage.getUniversal("userToken")&&this.$router.push({name:"login"})},methods:{checkPrivacy:function(t){for(var e=document.getElementsByName("groupCheckboxes"),i=0;i<e.length;i++)-1!==this.rowChecked&&!1===e[this.rowChecked].checked&&(this.rowChecked=-1,this.numberChecked=0),i!==this.rowChecked&&(this.numberChecked>=1?e[i].checked=!1:"group_only"===t.stories_privacy&&!0===e[i].checked&&(this.rowChecked=i,0===this.numberChecked?this.numberChecked++:this.numberChecked=0))},previewFiles:function(t){this.story.pictures.push(t.target.files)},selectedType:function(t){this.story.type=t;for(var e=document.getElementsByClassName("hiddenType"),i=0;i<e.length;i++)e[i].style.display="none"},selectTag:function(t,e){var n=e+" ";this.tagResult.splice(0),this.story.tags.push(n),this.selectedTags.push(n),document.getElementById("searchBarTag").style.display="none"},selectUser:function(t,e,n){this.userResult.splice(0),this.story.name_receiver=e+" "+n,this.story.receiver=t,document.getElementById("searchBar").style.display="none",this.appendReceiverName(),this.getGroups(t)},appendReceiverName:function(){document.getElementById("Rectangle-Copy-4").style.display="block"},appendTypedTag:function(){var t="#"+this.searchContentTag+" ";this.selectedTags.push(t),document.getElementById("searchBarTag").style.display="none"},appendSearchTag:function(){var t=this;this.tagResult.splice(0),document.getElementById("searchBarTag").style.display="block";var e=this.$auth.$storage.getUniversal("userToken");r()({url:"https://storylation.eu.ngrok.io/api/tags/search",method:"post",data:{q:this.searchContentTag},headers:{authorization:"Bearer ".concat(e)}}).then((function(e){for(var i=0;i<Object.keys(e.data.data).length;i++)t.tagResult.push(e.data.data[i]);Object.keys(e.data.data).length<Object.keys(t.tagResult).length&&setTimeout(t.appendSearchTag(),500)})).catch((function(t){throw t}))},appendSearch:function(){var t=this;this.userResult.splice(0);var e=this.$auth.$storage.getUniversal("userToken");r()({url:"https://storylation.eu.ngrok.io/api/users/search",method:"post",data:{q:this.searchContent},headers:{authorization:"Bearer ".concat(e)}}).then((function(e){for(var i=0;i<Object.keys(e.data.data).length;i++)t.userResult.push(e.data.data[i]);Object.keys(e.data.data).length<Object.keys(t.userResult).length&&setTimeout(t.appendSearch(),500)})).catch((function(t){throw t}))},seeGroup:function(){document.getElementById("groupList").style.display="none",this.sendStory()},appendGroup:function(){void 0!==this.groups&&(document.getElementById("groupList").style.display="block")},removeGroup:function(){void 0!==this.groups&&(document.getElementById("groupList").style.display="none")},getGroups:function(t){var e=this,n=this.$auth.$storage.getUniversal("userToken");r()({url:"https://storylation.eu.ngrok.io/api/users/"+t+"/shared-groups",method:"get",headers:{authorization:"Bearer ".concat(n)}}).then((function(t){for(var i=0;i<Object.keys(t.data.data).length;i++)e.groups.push(t.data.data[i])})).catch((function(t){throw t}))},sendStory:function(){for(var t=this.$auth.$storage.getUniversal("userToken"),e=new l.a,i=0;i<this.selectedTags.length;i++)e.append("tags["+i+"]",this.selectedTags[i]);for(var n=0;n<this.selectedGroup.length;n++)e.append("groups["+n+"]",this.selectedGroup[n]);for(var o=0;o<this.story.pictures.length;o++)e.append("pictures["+o+"]",this.story.pictures[o][0]);e.append("type","story"),e.append("content",this.story.content),!1===this.story.kudoboard?e.append("kudoboard",0):e.append("kudoboard",1),e.append("hidden_by_author",0),r()({url:"https://storylation.eu.ngrok.io/api/users/"+this.story.receiver+"/stories",method:"post",headers:{authorization:"Bearer ".concat(t)},data:e})},appendButton:function(){for(var t=document.getElementsByClassName("hiddenType"),i=0;i<t.length;i++)t[i].style.display="flex"},removeButton:function(){document.getElementById("Rectangle-Copy-4").style.display="none",document.getElementById("searchBar").style.display="block"}}},h=(n(288),n(46)),component=Object(h.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"max-w-xl h-160 rounded-none shadow-lg border border-gray-300 center bg-right-top bg-no-repeat center mt-35 m-auto",style:{backgroundImage:"url(../img/group@2x.png)"}},[n("div",[n("div",{staticClass:"hidden absolute shadow-lg bg-white rounded m-auto w-74 h-112 mt-24 ml-35 z-50",attrs:{id:"groupList"}},[t._l(t.groups,(function(e){return n("p",{key:e,staticClass:"mt-4 ml-4"},[t._v("\n        "+t._s(e.slug)+"\n        "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedGroup,expression:"selectedGroup"}],attrs:{type:"checkbox",name:"groupCheckboxes"},domProps:{value:e.id,checked:Array.isArray(t.selectedGroup)?t._i(t.selectedGroup,e.id)>-1:t.selectedGroup},on:{click:function(n){return t.checkPrivacy(e)},change:function(n){var o=t.selectedGroup,r=n.target,c=!!r.checked;if(Array.isArray(o)){var l=e.id,d=t._i(o,l);r.checked?d<0&&(t.selectedGroup=o.concat([l])):d>-1&&(t.selectedGroup=o.slice(0,d).concat(o.slice(d+1)))}else t.selectedGroup=c}}})])})),t._v(" "),t._l(t.numberChecked,(function(e){return n("p",{key:e,staticClass:"mt-4 ml-4"},[t._v("\n        KudoBoard\n        "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.story.kudoboard,expression:"story.kudoboard"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.story.kudoboard)?t._i(t.story.kudoboard,null)>-1:t.story.kudoboard},on:{change:function(e){var n=t.story.kudoboard,o=e.target,r=!!o.checked;if(Array.isArray(n)){var c=t._i(n,null);o.checked?c<0&&t.$set(t.story,"kudoboard",n.concat([null])):c>-1&&t.$set(t.story,"kudoboard",n.slice(0,c).concat(n.slice(c+1)))}else t.$set(t.story,"kudoboard",r)}}})])})),t._v(" "),n("button",{staticClass:"mt-4 ml-4 bg-blueStory text-white rounded w-14 h-8",on:{click:function(e){return t.seeGroup()}}},[t._v("\n        Valider\n      ")]),t._v(" "),n("button",{staticClass:"mt-4 bg-blueStory text-white rounded w-14 h-8",on:{click:function(e){return t.removeGroup()}}},[t._v("\n        Return\n      ")])],2),t._v(" "),n("button",{staticClass:"button_out",on:{click:function(e){return t.appendButton()}}},[n("div",{staticClass:"Rectangle mt-8 ml-4 outline-none"},[n("p",{staticClass:"phrase pt-px flex-row flex"},[t._v("\n          "+t._s(t.story.type)+"\n          "),n("img",{staticClass:"mt-1 w-5 h-5",attrs:{src:"img/icon-chevron-small.png"}})])])]),t._v(" "),n("div",{staticClass:"max-h-96 absolute overflow-scroll min-w-75 bg-white z-50"},t._l(t.types,(function(e){return n("button",{key:e,staticClass:"button_out hidden hiddenType",on:{click:function(n){return t.selectedType(e)}}},[n("div",{staticClass:"Rectangle mt-8 ml-4 outline-none"},[n("p",{staticClass:"phrase pt-px flex-row flex"},[t._v("\n            "+t._s(e)+"\n            "),n("img",{staticClass:"mt-1 w-5 h-5",attrs:{src:"img/icon-chevron-small.png"}})])])])})),0),t._v(" "),n("div",{staticClass:"ml-4 max-h-44 overflow-scroll absolute bg-white mt-4 mb-4",attrs:{id:"searchBar"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchContent,expression:"searchContent"}],attrs:{id:"inputSearch",type:"text",placeholder:"Search"},domProps:{value:t.searchContent},on:{input:[function(e){e.target.composing||(t.searchContent=e.target.value)},function(e){return t.appendSearch()}]}}),t._v(" "),n("button",{on:{click:function(e){return t.appendSearch()}}},[t._v("Search")]),t._v(" "),t._l(t.userResult,(function(e){return n("p",{key:e,staticClass:"max-w-44"},[n("button",{on:{click:function(n){return t.selectUser(e.id,e.first_name,e.last_name)}}},[t._v("\n          "+t._s(e.first_name)+" "+t._s(e.last_name)+" "+t._s(e.username)+"\n        ")])])}))],2),t._v(" "),n("div",{staticClass:"Rectangle-Copy-4 hidden absolute",attrs:{id:"Rectangle-Copy-4"}},[n("button",{on:{click:function(e){return t.removeButton()}}},[n("p",{staticClass:"phrase-copy-4 flex-row flex"},[t._v("\n          "+t._s(t.story.name_receiver)+"\n          "),n("img",{staticClass:"ml-1 mt-1",attrs:{src:"img/icon-croix.png"}})])])]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.story.content,expression:"story.content"}],staticClass:"h-96 w-123 border-0 ml-4 text-3xl text-IBM text-blueStory mt-16 -z-1 button_out resize-none",attrs:{type:"text",placeholder:"Write your story here"},domProps:{value:t.story.content},on:{input:function(e){e.target.composing||t.$set(t.story,"content",e.target.value)}}}),t._v(" "),n("div",[t._m(0),t._v(" "),n("input",{staticClass:"absolute mt-8 ml-8 w-9 h-9 bg-cover -z-1",style:{backgroundImage:"url(../img/icon-photo.png)"},attrs:{id:"file-input",type:"file",accept:".png, .jpeg, .jpg, .gif, .mp3, .mp4",src:"img/icon-photo.png",multiple:""},on:{change:t.previewFiles}}),t._v(" "),n("button",{staticClass:"absolute w-9 h-9 focus:outline-none",on:{click:function(e){return t.appendSearchTag()}}},[n("img",{staticClass:"ml-24 mt-8 w-9 h-9 -z-1",attrs:{src:"img/icon-tags.png"}})]),t._v(" "),n("div",{staticClass:"ml-4 max-h-44 overflow-scroll absolute bg-white mt-4 mb-4 hidden",attrs:{id:"searchBarTag"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchContentTag,expression:"searchContentTag"}],attrs:{id:"inputSearchTag",type:"text",placeholder:"Search Tag"},domProps:{value:t.searchContentTag},on:{input:[function(e){e.target.composing||(t.searchContentTag=e.target.value)},function(e){return t.appendSearchTag()}]}}),t._v(" "),n("button",{on:{click:function(e){return t.appendTypedTag()}}},[t._v("Search Tag")]),t._v(" "),t._l(t.tagResult,(function(e){return n("p",{key:e,staticClass:"max-w-44 bg-white z-50"},[n("button",{on:{click:function(n){return t.selectTag(e.data.id,e.name)}}},[t._v("\n            "+t._s(e.name)+"\n          ")])])}))],2),t._v(" "),n("div",{staticClass:"flex-row flex"},t._l(t.selectedTags,(function(e){return n("p",{key:e,staticClass:"ml-2"},[t._v("\n          "+t._s(e)+"\n        ")])})),0)]),t._v(" "),n("button",{on:{click:function(e){return t.appendGroup()}}},[n("p",{staticClass:"absolute mt-4 ml-112 text-storyColor font-bold text-xl"},[t._v("\n        PUBLISH\n      ")]),t._v(" "),n("img",{staticClass:"absolute mt-3.5 ml-132 w-8 h-8",attrs:{src:"img/icon-chevron-small.png"}})])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"w-9 h-9",attrs:{for:"file-input"}},[e("img",{staticClass:"mt-8 bg-white absolute ml-8 w-9 h-9",attrs:{src:"img/icon-photo.png"}})])}],!1,null,"810d5ffc",null);e.default=component.exports}}]);